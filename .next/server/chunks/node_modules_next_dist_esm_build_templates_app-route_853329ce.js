module.exports=[51236,e=>{"use strict";var t=e.i(47909),a=e.i(74017),o=e.i(96250),r=e.i(59756),n=e.i(61916),i=e.i(74677),d=e.i(69741),s=e.i(16795),l=e.i(87718),c=e.i(95169),u=e.i(47587),f=e.i(66012),b=e.i(70101),p=e.i(26937),y=e.i(10372),h=e.i(93695);e.i(52474);var m=e.i(220),k=e.i(89171);async function S(){try{let e=await fetch("https://api-sui.cetus.zone/v2/sui/pools",{headers:{"Content-Type":"application/json"},next:{revalidate:30}});if(!e.ok)return console.error("Cetus API error:",e.status),v();let t=await e.json();if(!t.data||!Array.isArray(t.data))return v();return t.data.slice(0,50).map(e=>({dex:"Cetus",address:e.pool_address,tokenA:e.coin_type_a,tokenB:e.coin_type_b,tokenASymbol:e.coin_a_symbol||x(e.coin_type_a),tokenBSymbol:e.coin_b_symbol||x(e.coin_type_b),liquidity:parseFloat(e.liquidity)||0,fee:e.fee_rate/1e4,volume24h:parseFloat(e.volume_24h)||0,price:function(e){try{let t=parseFloat(e)/0xffffffffffffffff;return t*t}catch{return 1}}(e.current_sqrt_price)}))}catch(e){return console.error("Failed to fetch Cetus pools:",e),v()}}function x(e){let t=e.split("::");return t[t.length-1]?.toUpperCase()||"UNKNOWN"}function v(){return[{dex:"Cetus",address:"0xcf994611fd4c48e277ce3ffd4d4364c914af2c3cbb05f7bf6facd371de688630",tokenA:"0x5d4b302506645c37ff133b98c4b50a5ae14841659738d6d733d59d0d217a93bf::coin::COIN",tokenB:"0x2::sui::SUI",tokenASymbol:"USDC",tokenBSymbol:"SUI",liquidity:25e5,fee:.003,volume24h:45e4,price:.85},{dex:"Cetus",address:"0x2e041f3fd93646dcc877f783c1f2b7fa62d30271bdef1f21f001ace39ea55298",tokenA:"0xc060006111016b8a020ad5b33834984a437aaa7d3c74c18e09a95d48aceab08c::coin::COIN",tokenB:"0x2::sui::SUI",tokenASymbol:"USDT",tokenBSymbol:"SUI",liquidity:18e5,fee:.003,volume24h:32e4,price:.84},{dex:"Cetus",address:"0x5af4976b871fa9a5ce6b0a3f3e9a8e4b2fcb7d5e8c1a3b6d9e2f4a7c0b3d6e9f",tokenA:"0x5d4b302506645c37ff133b98c4b50a5ae14841659738d6d733d59d0d217a93bf::coin::COIN",tokenB:"0xc060006111016b8a020ad5b33834984a437aaa7d3c74c18e09a95d48aceab08c::coin::COIN",tokenASymbol:"USDC",tokenBSymbol:"USDT",liquidity:32e5,fee:5e-4,volume24h:89e4,price:1},{dex:"Cetus",address:"0x1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1c2d3e4f5a6b7c8d9e0f1a2b",tokenA:"0xaf8cd5edc19c4512f4259f0bee101a40d41ebed738ade5874359610ef8eeced5::coin::COIN",tokenB:"0x2::sui::SUI",tokenASymbol:"WETH",tokenBSymbol:"SUI",liquidity:95e4,fee:.003,volume24h:18e4,price:2450}]}async function A(){try{let e=await fetch("https://api.turbos.finance/pools",{headers:{"Content-Type":"application/json"},next:{revalidate:30}});if(!e.ok)return console.error("Turbos API error:",e.status),C();let t=await e.json();if(!t.pools||!Array.isArray(t.pools))return C();return t.pools.slice(0,50).map(e=>({dex:"Turbos",address:e.address,tokenA:e.token0.address,tokenB:e.token1.address,tokenASymbol:e.token0.symbol,tokenBSymbol:e.token1.symbol,liquidity:parseFloat(e.tvl)||0,fee:e.fee/1e4,volume24h:parseFloat(e.volume24h)||0,price:parseFloat(e.price)||1}))}catch(e){return console.error("Failed to fetch Turbos pools:",e),C()}}function C(){return[{dex:"Turbos",address:"0xturb0s1234567890abcdef1234567890abcdef1234567890abcdef1234567890",tokenA:"0x5d4b302506645c37ff133b98c4b50a5ae14841659738d6d733d59d0d217a93bf::coin::COIN",tokenB:"0x2::sui::SUI",tokenASymbol:"USDC",tokenBSymbol:"SUI",liquidity:19e5,fee:.0025,volume24h:38e4,price:.86},{dex:"Turbos",address:"0xturb0s2234567890abcdef1234567890abcdef1234567890abcdef1234567890",tokenA:"0xc060006111016b8a020ad5b33834984a437aaa7d3c74c18e09a95d48aceab08c::coin::COIN",tokenB:"0x2::sui::SUI",tokenASymbol:"USDT",tokenBSymbol:"SUI",liquidity:16e5,fee:.0025,volume24h:29e4,price:.85},{dex:"Turbos",address:"0xturb0s3234567890abcdef1234567890abcdef1234567890abcdef1234567890",tokenA:"0x5d4b302506645c37ff133b98c4b50a5ae14841659738d6d733d59d0d217a93bf::coin::COIN",tokenB:"0xc060006111016b8a020ad5b33834984a437aaa7d3c74c18e09a95d48aceab08c::coin::COIN",tokenASymbol:"USDC",tokenBSymbol:"USDT",liquidity:28e5,fee:5e-4,volume24h:75e4,price:.9998},{dex:"Turbos",address:"0xturb0s4234567890abcdef1234567890abcdef1234567890abcdef1234567890",tokenA:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS",tokenB:"0x2::sui::SUI",tokenASymbol:"CETUS",tokenBSymbol:"SUI",liquidity:65e4,fee:.003,volume24h:12e4,price:.12}]}async function R(){let e=`
    query GetPools {
      pools {
        address
        token0 { symbol, address }
        token1 { symbol, address }
        tvl
        fee
        volume24h
        price
      }
    }
  `;try{let t=await fetch("https://api.kriya.finance/graphql",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e}),next:{revalidate:30}});if(!t.ok)return console.error("Kriya API error:",t.status),U();let{data:a}=await t.json();if(!a?.pools||!Array.isArray(a.pools))return U();return a.pools.slice(0,50).map(e=>({dex:"Kriya",address:e.address,tokenA:e.token0.address,tokenB:e.token1.address,tokenASymbol:e.token0.symbol,tokenBSymbol:e.token1.symbol,liquidity:e.tvl||0,fee:e.fee/1e4,volume24h:e.volume24h||0,price:e.price||1}))}catch(e){return console.error("Failed to fetch Kriya pools:",e),U()}}function U(){return[{dex:"Kriya",address:"0xkriya1234567890abcdef1234567890abcdef1234567890abcdef1234567890ab",tokenA:"0x5d4b302506645c37ff133b98c4b50a5ae14841659738d6d733d59d0d217a93bf::coin::COIN",tokenB:"0x2::sui::SUI",tokenASymbol:"USDC",tokenBSymbol:"SUI",liquidity:12e5,fee:.002,volume24h:22e4,price:.855},{dex:"Kriya",address:"0xkriya2234567890abcdef1234567890abcdef1234567890abcdef1234567890ab",tokenA:"0xc060006111016b8a020ad5b33834984a437aaa7d3c74c18e09a95d48aceab08c::coin::COIN",tokenB:"0x2::sui::SUI",tokenASymbol:"USDT",tokenBSymbol:"SUI",liquidity:98e4,fee:.002,volume24h:18e4,price:.845},{dex:"Kriya",address:"0xkriya3234567890abcdef1234567890abcdef1234567890abcdef1234567890ab",tokenA:"0xaf8cd5edc19c4512f4259f0bee101a40d41ebed738ade5874359610ef8eeced5::coin::COIN",tokenB:"0x5d4b302506645c37ff133b98c4b50a5ae14841659738d6d733d59d0d217a93bf::coin::COIN",tokenASymbol:"WETH",tokenBSymbol:"USDC",liquidity:72e4,fee:.003,volume24h:95e3,price:2380}]}async function g(e){let{searchParams:t}=new URL(e.url),a=t.get("tokenA"),o=t.get("tokenB");try{let[e,t,r]=await Promise.all([S(),A(),R()]),n=[...e,...t,...r];return a&&o&&(n=n.filter(e=>e.tokenASymbol===a&&e.tokenBSymbol===o||e.tokenASymbol===o&&e.tokenBSymbol===a||e.tokenASymbol===a||e.tokenBSymbol===a||e.tokenASymbol===o||e.tokenBSymbol===o)),n.sort((e,t)=>t.liquidity-e.liquidity),k.NextResponse.json({pools:n,count:n.length,sources:{cetus:e.length,turbos:t.length,kriya:r.length},timestamp:Date.now()})}catch(e){return console.error("Failed to fetch pools:",e),k.NextResponse.json({error:"Failed to fetch pools",details:String(e)},{status:500})}}e.s(["GET",()=>g,"dynamic",0,"force-dynamic","revalidate",0,30],11270);var I=e.i(11270);let E=new t.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/pools/route",pathname:"/api/pools",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/app/api/pools/route.ts",nextConfigOutput:"",userland:I}),{workAsyncStorage:w,workUnitAsyncStorage:T,serverHooks:N}=E;function B(){return(0,o.patchFetch)({workAsyncStorage:w,workUnitAsyncStorage:T})}async function O(e,t,o){E.isDev&&(0,r.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let k="/api/pools/route";k=k.replace(/\/index$/,"")||"/";let S=await E.prepare(e,t,{srcPage:k,multiZoneDraftMode:!1});if(!S)return t.statusCode=400,t.end("Bad Request"),null==o.waitUntil||o.waitUntil.call(o,Promise.resolve()),null;let{buildId:x,params:v,nextConfig:A,parsedUrl:C,isDraftMode:R,prerenderManifest:U,routerServerContext:g,isOnDemandRevalidate:I,revalidateOnlyGenerated:w,resolvedPathname:T,clientReferenceManifest:N,serverActionsManifest:B}=S,O=(0,d.normalizeAppPath)(k),_=!!(U.dynamicRoutes[O]||U.routes[T]),q=async()=>((null==g?void 0:g.render404)?await g.render404(e,t,C,!1):t.end("This page could not be found"),null);if(_&&!R){let e=!!U.routes[T],t=U.dynamicRoutes[O];if(t&&!1===t.fallback&&!e){if(A.experimental.adapterPath)return await q();throw new h.NoFallbackError}}let P=null;!_||E.isDev||R||(P="/index"===(P=T)?"/":P);let D=!0===E.isDev||!_,F=_&&!D;B&&N&&(0,i.setManifestsSingleton)({page:k,clientReferenceManifest:N,serverActionsManifest:B});let H=e.method||"GET",j=(0,n.getTracer)(),K=j.getActiveScopeSpan(),M={params:v,prerenderManifest:U,renderOpts:{experimental:{authInterrupts:!!A.experimental.authInterrupts},cacheComponents:!!A.cacheComponents,supportsDynamicResponse:D,incrementalCache:(0,r.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:A.cacheLife,waitUntil:o.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,a,o,r)=>E.onRequestError(e,t,o,r,g)},sharedContext:{buildId:x}},$=new s.NodeNextRequest(e),L=new s.NodeNextResponse(t),G=l.NextRequestAdapter.fromNodeNextRequest($,(0,l.signalFromNodeResponse)(t));try{let i=async e=>E.handle(G,M).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let a=j.getRootSpanAttributes();if(!a)return;if(a.get("next.span_type")!==c.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${a.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let o=a.get("next.route");if(o){let t=`${H} ${o}`;e.setAttributes({"next.route":o,"http.route":o,"next.span_name":t}),e.updateName(t)}else e.updateName(`${H} ${k}`)}),d=!!(0,r.getRequestMeta)(e,"minimalMode"),s=async r=>{var n,s;let l=async({previousCacheEntry:a})=>{try{if(!d&&I&&w&&!a)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let n=await i(r);e.fetchMetrics=M.renderOpts.fetchMetrics;let s=M.renderOpts.pendingWaitUntil;s&&o.waitUntil&&(o.waitUntil(s),s=void 0);let l=M.renderOpts.collectedTags;if(!_)return await (0,f.sendResponse)($,L,n,M.renderOpts.pendingWaitUntil),null;{let e=await n.blob(),t=(0,b.toNodeOutgoingHttpHeaders)(n.headers);l&&(t[y.NEXT_CACHE_TAGS_HEADER]=l),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let a=void 0!==M.renderOpts.collectedRevalidate&&!(M.renderOpts.collectedRevalidate>=y.INFINITE_CACHE)&&M.renderOpts.collectedRevalidate,o=void 0===M.renderOpts.collectedExpire||M.renderOpts.collectedExpire>=y.INFINITE_CACHE?void 0:M.renderOpts.collectedExpire;return{value:{kind:m.CachedRouteKind.APP_ROUTE,status:n.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:a,expire:o}}}}catch(t){throw(null==a?void 0:a.isStale)&&await E.onRequestError(e,t,{routerKind:"App Router",routePath:k,routeType:"route",revalidateReason:(0,u.getRevalidateReason)({isStaticGeneration:F,isOnDemandRevalidate:I})},!1,g),t}},c=await E.handleResponse({req:e,nextConfig:A,cacheKey:P,routeKind:a.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:U,isRoutePPREnabled:!1,isOnDemandRevalidate:I,revalidateOnlyGenerated:w,responseGenerator:l,waitUntil:o.waitUntil,isMinimalMode:d});if(!_)return null;if((null==c||null==(n=c.value)?void 0:n.kind)!==m.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==c||null==(s=c.value)?void 0:s.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});d||t.setHeader("x-nextjs-cache",I?"REVALIDATED":c.isMiss?"MISS":c.isStale?"STALE":"HIT"),R&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let h=(0,b.fromNodeOutgoingHttpHeaders)(c.value.headers);return d&&_||h.delete(y.NEXT_CACHE_TAGS_HEADER),!c.cacheControl||t.getHeader("Cache-Control")||h.get("Cache-Control")||h.set("Cache-Control",(0,p.getCacheControlHeader)(c.cacheControl)),await (0,f.sendResponse)($,L,new Response(c.value.body,{headers:h,status:c.value.status||200})),null};K?await s(K):await j.withPropagatedContext(e.headers,()=>j.trace(c.BaseServerSpan.handleRequest,{spanName:`${H} ${k}`,kind:n.SpanKind.SERVER,attributes:{"http.method":H,"http.target":e.url}},s))}catch(t){if(t instanceof h.NoFallbackError||await E.onRequestError(e,t,{routerKind:"App Router",routePath:O,routeType:"route",revalidateReason:(0,u.getRevalidateReason)({isStaticGeneration:F,isOnDemandRevalidate:I})},!1,g),_)throw t;return await (0,f.sendResponse)($,L,new Response(null,{status:500})),null}}e.s(["handler",()=>O,"patchFetch",()=>B,"routeModule",()=>E,"serverHooks",()=>N,"workAsyncStorage",()=>w,"workUnitAsyncStorage",()=>T],51236)}];

//# sourceMappingURL=node_modules_next_dist_esm_build_templates_app-route_853329ce.js.map